<!-- Launch file for running RS locally with web viwualization -->
<launch>
  
  <include file="$(find rosbridge_server)/launch/rosbridge_websocket.launch" />
  <node name="web_video_server" pkg="web_video_server" type="web_video_server" output="screen" respawn="true"/>


  <param name="initial_package" type="string" value="rs_kbreasoning" />
  <param name="initial_goal" type="string" value="visualisation_server,visualisation_canvas" /> 
  <node name="json_prolog" pkg="json_prolog" type="json_prolog_node" cwd="node" output="screen" />

  <!-- launch robosherlock -->
  <arg name="wait" default="false" />
  <node if="$(arg wait)"  name="RoboSherlock" pkg="rs_kbreasoning" type="runAE" output="screen" args="web -wait -visualizer -idres" />
  <node unless="$(arg wait)"  name="RoboSherlock" pkg="rs_kbreasoning" type="runAE" output="screen" args="web -visualizer -idres" />


  <!-- realtime filter -->
  <node pkg="realtime_urdf_filter" type="realtime_urdf_filter" name="$(anon realtime_urdf_filter)" output="log">
    <remap from="~input_depth" to="/kinect_head/depth_registered/image_raw"/>
    <remap from="~output_depth" to="/kinect_head/depth_registered/image_raw_filtered" />
    <remap from="~output_mask" to="/kinect_head/depth_registered/mask_filtered" />

    <rosparam command="load" file="$(find robosherlock)/config/filter_parameters_kinect.yaml"/>
    <env name="DISPLAY" value=":0"/>
  </node>

</launch>
